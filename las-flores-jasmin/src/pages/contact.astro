---
import NavBar from '../components/NavBar.astro';
import '../styles/global.css';
import '../styles/global.css';
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact | Las Flores Jasmin</title>
    <meta name="description" content="Get in touch with Las Flores Jasmin" />
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body class="font-sans bg-white text-gray-800">
    <NavBar />

    <main class="max-w-2xl mx-auto px-4 py-12">
      <h1 class="text-3xl font-bold text-center text-rose-700 mb-6">Contact Us</h1>
      <p class="text-center text-gray-600 mb-8">
        We'd love to hear from you! Fill out the form below and we'll be in touch soon.
      </p>

      <form action="/contact" method="POST" class="space-y-6">
        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">Name</label>
          <input
            type="text"
            name="name"
            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-rose-500"
            required
          />
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">Email</label>
          <input
            type="email"
            name="email"
            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-rose-500"
            required
          />
        </div>

        <div>
          <label class="block mb-2 text-sm font-medium text-gray-700">Message</label>
          <textarea
            rows="5"
            name="message"
            class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-rose-500"
            required
          ></textarea>
        </div>

        <button
          type="submit"
          class="contact-button"
        >
          Send Message
        </button>
      </form>
      <div id="form-message" class="text-center mt-4 text-lg font-semibold"></div>
    </main>
    <script>
      const form = document.querySelector('form[action="/contact"]');
      const messageDiv = document.getElementById('form-message');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        messageDiv.textContent = "Sending...";
        messageDiv.className = "text-center mt-4 text-lg font-semibold text-gray-500";

        const formData = new FormData(form);
        const response = await fetch(form.action, {
          method: "POST",
          body: formData,
        });

        if (response.ok) {
          messageDiv.textContent = "Message sent! Thank you for contacting us.";
          messageDiv.className = "text-center mt-4 text-lg font-semibold text-green-600";
          form.reset();
        } else {
         const errorText = await response.text();
         messageDiv.textContent = "Error: " + errorText;
         messageDiv.className = "text-center mt-4 text-lg font-semibold text-red-600";
        }
      });
    </script>
  </body>
</html>
